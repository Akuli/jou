# A call to the _jou_netbsd_startup() function is inserted to the
# start of every Jou program when compiling for NetBSD.

# On NetBSD, these std* things are macros
# expanding to elements of the __sF array
# of FILE structs.

declare global __sF: byte[152][3] # sizeof(FILE) == 152
global stdin: void*
global stdout: void*
global stderr: void*

def _jou_netbsd_startup() -> None:
    stdin = &__sF[0]
    stdout = &__sF[1]
    stderr = &__sF[2]

# Jou uses __errno_location,
# NetBSD has __ernno()

declare __errno() -> int*
def __errno_location() -> int*:
    return __errno()
