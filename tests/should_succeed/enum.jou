import "stdlib/io.jou"

enum FooBar:
    Foo
    Bar

# This will fail compiling if a value is not int.
#
# Taking a pointer avoids implicit casts. For example, if b is a byte, then
# b implicitly casts to int, but &b doesn't implicitly cast to int*.
def check_int(x: int*) -> None:
    pass

def main() -> int:
    printf("%d\n", FooBar.Foo as int)  # Output: 0
    printf("%d\n", FooBar.Bar as int)  # Output: 1

    printf("%d\n", FooBar.Foo as byte)  # Output: 0
    printf("%d\n", FooBar.Bar as byte)  # Output: 1

    printf("%lld\n", FooBar.Foo as int64)  # Output: 0
    printf("%lld\n", FooBar.Bar as int64)  # Output: 1

    x = FooBar.Foo
    if x == FooBar.Foo:
        printf("yass\n")  # Output: yass
    if x == FooBar.Bar:
        printf("wut wut why dis\n")

    num = enum_count(FooBar)
    check_int(&num)
    printf("%d\n", num)  # Output: 2

    return 0
