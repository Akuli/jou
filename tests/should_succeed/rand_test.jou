import "stdlib/rand.jou"


def main() -> int:
    # Check that RAND_MAX is set correctly. We call rand() 10000 times and
    # check that the biggest value is between 99% and 100% of RAND_MAX.
    #
    # Let's do some math to explain why 10000 iterations was chosen.
    #
    # Assume that rand() outputs perfectly random numbers and RAND_MAX is set
    # correctly. Consider the situation we want to avoid: the test fails
    # because the biggest value is less than 0.99*RAND_MAX. This is equivalent
    # to saying that all 10000 values are less than 0.99*RAND_MAX. The
    # probability of that is:
    #
    #   0.99 ^ 10000 = ( (1 - 1/100)^100 )^100
    #
    # which is very close to (1/e)^100, or e^(-100), i.e. VERY unlikely.
    m = 0
    for i = 0; i < 10000; i++:
        m = max(m, rand())
    printf("%d\n", m > RAND_MAX - RAND_MAX/100)  # Output: 1
    printf("%d\n", m <= RAND_MAX)                # Output: 1

    # Ensure that srand() works
    a = rand()
    srand(123)
    b = rand()
    srand(123)
    c = rand()
    printf("%d\n", a == b)  # Output: 0
    printf("%d\n", b == c)  # Output: 1
