all: jou.exe

jou_bootstrap.exe: jou_to_c.py config.jou $(wildcard compiler/*.jou compiler/*/*.jou)
	# TODO: `-w` silences all errors. We may eventually want something less dumb.
	python jou_to_c.py compiler/main.jou | $(CLANG) -w -O1 -x c - -o jou_bootstrap $(LINKER_FLAGS)

jou.exe: jou_bootstrap.exe $(wildcard compiler/*.jou compiler/*/*.jou)
	./jou_bootstrap.exe -o jou.exe compiler/main.jou
